(this["webpackJsonphkzf-mobile"]=this["webpackJsonphkzf-mobile"]||[]).push([[12],{221:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(222),l=a.n(o);t.a=function(e){var t=e.src,a=e.title,n=e.desc,o=e.tags,c=e.price,s=e.onClick,i=e.style;return r.a.createElement("div",{className:l.a.house,onClick:s,style:i},r.a.createElement("div",{className:l.a.imgWrap},r.a.createElement("img",{className:l.a.img,src:t,alt:""})),r.a.createElement("div",{className:l.a.content},r.a.createElement("h3",{className:l.a.title},a),r.a.createElement("div",{className:l.a.desc},n),r.a.createElement("div",null,o.map((function(e,t){var a="tag"+(t+1);return r.a.createElement("span",{className:[l.a.tag,l.a[a]].join(" "),key:e},e)}))),r.a.createElement("div",{className:l.a.price},r.a.createElement("span",{className:l.a.priceNum},c)," \u5143/\u6708")))}},222:function(e,t,a){e.exports={house:"HouseItem_house__3-EOM",imgWrap:"HouseItem_imgWrap__3FWRL",img:"HouseItem_img__2Bm7I",content:"HouseItem_content__HAIK9",title:"HouseItem_title__3c74j",desc:"HouseItem_desc__3HE6n",price:"HouseItem_price__369t8",priceNum:"HouseItem_priceNum__3c2pl",tag:"HouseItem_tag__2H0YY",tag1:"HouseItem_tag1__2C-tJ",tag2:"HouseItem_tag2__2mBKh",tag3:"HouseItem_tag3__2EQAx"}},266:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(28),l=a(267),c=a.n(l);t.a=function(e){var t=e.children;return r.a.createElement("div",{className:c.a.root},r.a.createElement("img",{className:c.a.img,src:o.a+"/img/not-found.png",alt:"\u6682\u65e0\u6570\u636e"}),r.a.createElement("p",{className:c.a.msg},t))}},267:function(e,t,a){e.exports={root:"NoHouse_root__1sHrG",img:"NoHouse_img__3ZnYx",msg:"NoHouse_msg__3NqPw"}},391:function(e,t,a){e.exports={root:"FilterTitle_root__1Avx1",dropdown:"FilterTitle_dropdown__2opAM",selected:"FilterTitle_selected__3R0aE"}},394:function(e,t,a){e.exports={root:"FilterFooter_root__2Ku6X",btn:"FilterFooter_btn__3SE8y",cancel:"FilterFooter_cancel__3Anf9",ok:"FilterFooter_ok__17cEO"}},395:function(e,t,a){e.exports={root:"FilterMore_root__3btjx",mask:"FilterMore_mask__2BJQm",tags:"FilterMore_tags__sMeDt",tag:"FilterMore_tag__EtPqz",tagActive:"FilterMore_tagActive__HPmTJ",dl:"FilterMore_dl__37nZD",dt:"FilterMore_dt__3JXyD",dd:"FilterMore_dd__2GpSB",footer:"FilterMore_footer__27WQY"}},396:function(e,t,a){e.exports={root:"Filter_root__2X4SE",mask:"Filter_mask__2fx0X",content:"Filter_content__8IdLT"}},413:function(e,t,a){e.exports={fixed:"Sticky_fixed__5i0KO"}},414:function(e,t,a){e.exports={header:"HouseList_header__vpHHT",searchHeader:"HouseList_searchHeader__2dJ9N",houseItems:"HouseList_houseItems__2fKHT",loading:"HouseList_loading__1xh0e"}},431:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return G}));a(48);var n=a(12),r=a.n(n),o=(a(215),a(216)),l=a.n(o),c=a(9),s=a.n(c),i=a(20),u=a(233),d=a(299),m=a(36),p=a(37),h=a(39),f=a(38),v=a(0),_=a.n(v),g=a(303),y=a(71),E=a(28),k=a(40),b=a(97),N=a(272),S=a(397),O=a(391),j=a.n(O),w=[{title:"\u533a\u57df",type:"area"},{title:"\u65b9\u5f0f",type:"mode"},{title:"\u79df\u91d1",type:"price"},{title:"\u7b5b\u9009",type:"more"}];function C(e){var t=e.titleSelectedStatus,a=e.onClick;return _.a.createElement(r.a,{align:"center",className:j.a.root},w.map((function(e){var n=t[e.type];return _.a.createElement(r.a.Item,{key:e.type,onClick:function(){return a(e.type)}},_.a.createElement("span",{className:[j.a.dropdown,n?j.a.selected:""].join(" ")},_.a.createElement("span",null,e.title),_.a.createElement("i",{className:"iconfont icon-arrow"})))})))}a(296);var F=a(392),x=a.n(F),H=a(394),T=a.n(H);var I=function(e){var t=e.cancelText,a=void 0===t?"\u53d6\u6d88":t,n=e.okText,o=void 0===n?"\u786e\u5b9a":n,l=e.onCancel,c=e.onOk,s=e.className;return _.a.createElement(r.a,{className:[T.a.root,s||""].join(" ")},_.a.createElement("span",{className:[T.a.btn,T.a.cancel].join(" "),onClick:l},a),_.a.createElement("span",{className:[T.a.btn,T.a.ok].join(" "),onClick:c},o))},L=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={value:e.props.defaultValue},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.onCancel,n=t.onSave,r=t.data,o=t.cols,l=t.type,c=this.state.value;return _.a.createElement(_.a.Fragment,null,_.a.createElement(x.a,{data:r,value:c,cols:o,onChange:function(t){e.setState({value:t})}}),_.a.createElement(I,{onCancel:function(){return a()},onOk:function(){return n(l,c)}}))}}]),a}(v.Component),M=a(395),V=a.n(M),R=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={selectedValues:e.props.defaultValue},e.onCancel=function(){e.setState({selectedValues:[]})},e.onOk=function(){var t=e.props,a=t.type;(0,t.onSave)(a,e.state.selectedValues)},e}return Object(p.a)(a,[{key:"onTagClick",value:function(e){var t=this.state.selectedValues,a=Object(u.a)(t);if(a.indexOf(e)<=-1)a.push(e);else{var n=a.findIndex((function(t){return t===e}));a.splice(n,1)}this.setState({selectedValues:a})}},{key:"renderFilters",value:function(e){var t=this,a=this.state.selectedValues;return e.map((function(e){var n=a.indexOf(e.value)>-1;return _.a.createElement("span",{key:e.value,className:[V.a.tag,n?V.a.tagActive:""].join(" "),onClick:function(){return t.onTagClick(e.value)}},e.label)}))}},{key:"render",value:function(){var e=this.props,t=e.data,a=t.roomType,n=t.oriented,r=t.floor,o=t.characteristic,l=e.onCancel,c=e.type;return _.a.createElement("div",{className:V.a.root},_.a.createElement("div",{className:V.a.mask,onClick:function(){return l(c)}}),_.a.createElement("div",{className:V.a.tags},_.a.createElement("dl",{className:V.a.dl},_.a.createElement("dt",{className:V.a.dt},"\u6237\u578b"),_.a.createElement("dd",{className:V.a.dd},this.renderFilters(a)),_.a.createElement("dt",{className:V.a.dt},"\u671d\u5411"),_.a.createElement("dd",{className:V.a.dd},this.renderFilters(n)),_.a.createElement("dt",{className:V.a.dt},"\u697c\u5c42"),_.a.createElement("dd",{className:V.a.dd},this.renderFilters(r)),_.a.createElement("dt",{className:V.a.dt},"\u623f\u5c4b\u4eae\u70b9"),_.a.createElement("dd",{className:V.a.dd},this.renderFilters(o)))),_.a.createElement(I,{className:V.a.footer,cancelText:"\u6e05\u9664",onCancel:this.onCancel,onOk:this.onOk}))}}]),a}(v.Component),A=a(396),D=a.n(A),B={area:!1,mode:!1,price:!1,more:!1},J={area:["area","null"],mode:["null"],price:["null"],more:[]},P=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={titleSelectedStatus:B,openType:"",filtersData:{},selectedValues:J},e.onTitleClick=function(t){e.htmlBody.className="body-fixed";var a=e.state,n=a.titleSelectedStatus,r=a.selectedValues,o=Object(d.a)({},n);Object.keys(n).forEach((function(e){if(e!==t){var a=r[e];"area"!==e||2===a.length&&"area"===a[0]?"mode"===e&&"null"!==a[0]||"price"===e&&"null"!==a[0]||"more"===e&&0!==a.length?o[e]=!0:o[e]=!1:o[e]=!0}else o[t]=!0})),e.setState({openType:t,titleSelectedStatus:o})},e.onCancel=function(t){e.htmlBody.className="",console.log("cancel:",t);var a=e.state,n=a.titleSelectedStatus,r=a.selectedValues,o=Object(d.a)({},n),l=r[t];"area"!==t||2===l.length&&"area"===l[0]?"mode"===t&&"null"!==l[0]||"price"===t&&"null"!==l[0]||"more"===t&&0!==l.length?o[t]=!0:o[t]=!1:o[t]=!0,e.setState({openType:"",titleSelectedStatus:o})},e.onSave=function(t,a){e.htmlBody.className="",console.log(t,a);var n=e.state.titleSelectedStatus,r=Object(d.a)({},n),o=a;"area"!==t||2===o.length&&"area"===o[0]?"mode"===t&&"null"!==o[0]||"price"===t&&"null"!==o[0]||"more"===t&&0!==o.length?r[t]=!0:r[t]=!1:r[t]=!0;var l=Object(d.a)({},e.state.selectedValues,Object(N.a)({},t,a));console.log("\u6700\u65b0\u7684\u9009\u4e2d\u503c\uff1a",l);var c=l.area,s=l.mode,i=l.price,u=l.more,m={},p=c[0];console.log(p);var h="null";3===c.length&&(h="null"!==c[2]?c[2]:c[1]),m[p]=h,m.mode=s[0],m.price=i[0],m.more=u.join(","),console.log(m),e.props.onFilter(m),e.setState({openType:"",titleSelectedStatus:r,selectedValues:l})},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.htmlBody=document.body,this.getFiltersData()}},{key:"getFiltersData",value:function(){var e=Object(i.a)(s.a.mark((function e(){var t,a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(localStorage.getItem("hkzf_city")),a=t.value,e.next=3,y.a.get("/houses/condition?id=".concat(a));case 3:n=e.sent,this.setState({filtersData:n.data.body});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"renderFilterPicker",value:function(){var e=this.state,t=e.openType,a=e.filtersData,n=a.area,r=a.subway,o=a.rentType,l=a.price,c=e.selectedValues;if("area"!==t&&"mode"!==t&&"price"!==t)return null;var s=[],i=3,u=c[t];switch(t){case"area":s=[n,r],i=3;break;case"mode":s=o,i=1;break;case"price":s=l,i=1}return _.a.createElement(L,{key:t,onCancel:this.onCancel,onSave:this.onSave,data:s,cols:i,type:t,defaultValue:u})}},{key:"renderFilterMore",value:function(){var e=this.state,t=e.openType,a=e.selectedValues,n=e.filtersData,r=n.roomType,o=n.oriented,l=n.floor,c=n.characteristic;if("more"!==t)return null;var s={roomType:r,oriented:o,floor:l,characteristic:c},i=a.more;return _.a.createElement(R,{data:s,type:t,onSave:this.onSave,onCancel:this.onCancel,defaultValue:i})}},{key:"renderMask",value:function(){var e=this,t=this.state.openType,a="more"===t||""===t;return _.a.createElement(S.Spring,{from:{opacity:0},to:{opacity:a?0:1}},(function(a){return 0===a.opacity?null:_.a.createElement("div",{style:a,className:D.a.mask,onClick:function(){return e.onCancel(t)}})}))}},{key:"render",value:function(){var e=this.state.titleSelectedStatus;return _.a.createElement("div",{className:D.a.root},this.renderMask(),_.a.createElement("div",{className:D.a.content},_.a.createElement(C,{titleSelectedStatus:e,onClick:this.onTitleClick}),this.renderFilterPicker(),this.renderFilterMore()))}}]),a}(v.Component),W=a(221),K=a(413),z=a.n(K),X=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).placeholder=Object(v.createRef)(),e.content=Object(v.createRef)(),e.handleScroll=function(){var t=e.props.height,a=e.placeholder.current,n=e.content.current;a.getBoundingClientRect().top<0?(n.classList.add(z.a.fixed),a.style.height="".concat(t,"px")):(n.classList.remove(z.a.fixed),a.style.height="0px")},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){return _.a.createElement("div",null,_.a.createElement("div",{ref:this.placeholder}),_.a.createElement("div",{ref:this.content},this.props.children))}}]),a}(v.Component),Y=a(266),Q=a(414),q=a.n(Q),G=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={list:[],count:0,isLoading:!1},e.label="",e.value="",e.filters={},e.onFilter=function(t){window.scrollTo(0,0),e.filters=t,e.searchHouseList()},e.renderHouseList=function(t){var a=t.key,n=t.index,r=t.style,o=e.state.list[n];return o?(console.log(o),_.a.createElement(W.a,{key:a,onClick:function(){return e.props.history.push("/detail/".concat(o.houseCode))},style:r,src:E.a+o.houseImg,title:o.title,desc:o.desc,tags:o.tags,price:o.price})):_.a.createElement("div",{key:a,style:r},_.a.createElement("p",{className:q.a.loading}))},e.isRowLoaded=function(t){var a=t.index;return!!e.state.list[a]},e.loadMoreRows=function(t){var a=t.startIndex,n=t.stopIndex;return console.log(a,n),new Promise((function(t){y.a.get("/houses",{params:Object(d.a)({cityId:e.value},e.filters,{start:a,end:n})}).then((function(a){e.setState({list:[].concat(Object(u.a)(e.state.list),Object(u.a)(a.data.body.list))}),t()}))}))},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=Object(i.a)(s.a.mark((function e(){var t,a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.d)();case 2:t=e.sent,a=t.label,n=t.value,this.label=a,this.value=n,this.searchHouseList();case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"searchHouseList",value:function(){var e=Object(i.a)(s.a.mark((function e(){var t,a,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),l.a.loading("\u52a0\u8f7d\u4e2d...",0,null,!1),e.next=4,y.a.get("/houses",{params:Object(d.a)({cityId:this.value},this.filters,{start:1,end:20})});case 4:t=e.sent,console.log(t),a=t.data.body,n=a.list,r=a.count,l.a.hide(),console.log(t),0!==r&&l.a.info("\u5171\u627e\u5230 ".concat(r," \u5957\u623f\u6e90"),2,null,!1),this.setState({list:n,count:r,isLoading:!1});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"renderList",value:function(){var e=this,t=this.state,a=t.count,n=t.isLoading;return 0!==a||n?_.a.createElement(g.b,{isRowLoaded:this.isRowLoaded,loadMoreRows:this.loadMoreRows,rowCount:a},(function(t){var n=t.onRowsRendered,r=t.registerChild;return _.a.createElement(g.d,null,(function(t){var o=t.height,l=t.isScrolling,c=t.scrollTop;return _.a.createElement(g.a,null,(function(t){var s=t.width;return _.a.createElement(g.c,{onRowsRendered:n,ref:r,autoHeight:!0,width:s,height:o,rowCount:a,rowHeight:120,rowRenderer:e.renderHouseList,isScrolling:l,scrollTop:c})}))}))})):_.a.createElement(Y.a,null,"\u6ca1\u6709\u627e\u5230\u623f\u6e90\uff0c\u8bf7\u60a8\u6362\u4e2a\u641c\u7d22\u6761\u4ef6\u5427~")}},{key:"render",value:function(){var e=this;this.state.count;return _.a.createElement("div",null,_.a.createElement(r.a,{className:q.a.header},_.a.createElement("i",{className:"iconfont icon-back",onClick:function(){return e.props.history.go(-1)}}),_.a.createElement(b.a,{cityName:this.label,className:q.a.searchHeader})),_.a.createElement(X,{height:40},_.a.createElement(P,{onFilter:this.onFilter})),_.a.createElement("div",{className:q.a.houseItems},this.renderList()))}}]),a}(_.a.Component)}}]);
//# sourceMappingURL=12.371a17bb.chunk.js.map