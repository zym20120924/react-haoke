(this["webpackJsonphkzf-mobile"]=this["webpackJsonphkzf-mobile"]||[]).push([[13],{199:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(200),c=a.n(o);t.a=function(e){var t=e.src,a=e.title,n=e.desc,o=e.tags,l=e.price,s=e.onClick,i=e.style;return r.a.createElement("div",{className:c.a.house,onClick:s,style:i},r.a.createElement("div",{className:c.a.imgWrap},r.a.createElement("img",{className:c.a.img,src:t,alt:""})),r.a.createElement("div",{className:c.a.content},r.a.createElement("h3",{className:c.a.title},a),r.a.createElement("div",{className:c.a.desc},n),r.a.createElement("div",null,o.map((function(e,t){var a="tag"+(t+1);return r.a.createElement("span",{className:[c.a.tag,c.a[a]].join(" "),key:e},e)}))),r.a.createElement("div",{className:c.a.price},r.a.createElement("span",{className:c.a.priceNum},l)," \u5143/\u6708")))}},200:function(e,t,a){e.exports={house:"HouseItem_house__3-EOM",imgWrap:"HouseItem_imgWrap__3FWRL",img:"HouseItem_img__2Bm7I",content:"HouseItem_content__HAIK9",title:"HouseItem_title__3c74j",desc:"HouseItem_desc__3HE6n",price:"HouseItem_price__369t8",priceNum:"HouseItem_priceNum__3c2pl",tag:"HouseItem_tag__2H0YY",tag1:"HouseItem_tag1__2C-tJ",tag2:"HouseItem_tag2__2mBKh",tag3:"HouseItem_tag3__2EQAx"}},250:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(32),c=a(251),l=a.n(c);t.a=function(e){var t=e.children;return r.a.createElement("div",{className:l.a.root},r.a.createElement("img",{className:l.a.img,src:o.a+"/img/not-found.png",alt:"\u6682\u65e0\u6570\u636e"}),r.a.createElement("p",{className:l.a.msg},t))}},251:function(e,t,a){e.exports={root:"NoHouse_root__1sHrG",img:"NoHouse_img__3ZnYx",msg:"NoHouse_msg__3NqPw"}},381:function(e,t,a){},382:function(e,t,a){e.exports={root:"FilterTitle_root__1Avx1",dropdown:"FilterTitle_dropdown__2opAM",selected:"FilterTitle_selected__3R0aE"}},385:function(e,t,a){e.exports={root:"FilterFooter_root__2Ku6X",btn:"FilterFooter_btn__3SE8y",cancel:"FilterFooter_cancel__3Anf9",ok:"FilterFooter_ok__17cEO"}},386:function(e,t,a){e.exports={root:"FilterMore_root__3btjx",mask:"FilterMore_mask__2BJQm",tags:"FilterMore_tags__sMeDt",tag:"FilterMore_tag__EtPqz",tagActive:"FilterMore_tagActive__HPmTJ",dl:"FilterMore_dl__37nZD",dt:"FilterMore_dt__3JXyD",dd:"FilterMore_dd__2GpSB",footer:"FilterMore_footer__27WQY"}},387:function(e,t,a){e.exports={root:"Filter_root__2X4SE",mask:"Filter_mask__2fx0X",content:"Filter_content__8IdLT"}},404:function(e,t,a){e.exports={fixed:"Sticky_fixed__5i0KO"}},405:function(e,t,a){e.exports={header:"HouseList_header__vpHHT",searchHeader:"HouseList_searchHeader__2dJ9N",houseItems:"HouseList_houseItems__2fKHT",loading:"HouseList_loading__1xh0e"}},426:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return Z}));a(188);var n=a(189),r=a.n(n),o=(a(193),a(194)),c=a.n(o),l=a(41),s=a.n(l),i=a(60),u=a(214),d=a(285),m=a(27),p=a(28),h=a(30),f=a(29),v=a(0),_=a.n(v),g=a(289),y=a(64),E=a(32),k=a(61),N=a(14);a(381);var b=Object(N.f)((function(e){var t=e.history,a=e.cityName,n=e.className;return _.a.createElement(r.a,{className:["search-box",n||""].join(" ")},_.a.createElement(r.a,{className:"search"},_.a.createElement("div",{className:"location",onClick:function(){return t.push("/citylist")}},_.a.createElement("span",{className:"name"},a),_.a.createElement("i",{className:"iconfont icon-arrow"})),_.a.createElement("div",{className:"form",onClick:function(){return t.push("/search")}},_.a.createElement("i",{className:"iconfont icon-seach"}),_.a.createElement("span",{className:"text"},"\u8bf7\u8f93\u5165\u5c0f\u533a\u6216\u5730\u5740"))),_.a.createElement("i",{className:"iconfont icon-map",onClick:function(){return t.push("/map")}}))})),O=a(256),S=a(388),j=a(382),C=a.n(j),w=[{title:"\u533a\u57df",type:"area"},{title:"\u65b9\u5f0f",type:"mode"},{title:"\u79df\u91d1",type:"price"},{title:"\u7b5b\u9009",type:"more"}];function F(e){var t=e.titleSelectedStatus,a=e.onClick;return _.a.createElement(r.a,{align:"center",className:C.a.root},w.map((function(e){var n=t[e.type];return _.a.createElement(r.a.Item,{key:e.type,onClick:function(){return a(e.type)}},_.a.createElement("span",{className:[C.a.dropdown,n?C.a.selected:""].join(" ")},_.a.createElement("span",null,e.title),_.a.createElement("i",{className:"iconfont icon-arrow"})))})))}a(282);var x=a(383),H=a.n(x),T=a(385),I=a.n(T);var L=function(e){var t=e.cancelText,a=void 0===t?"\u53d6\u6d88":t,n=e.okText,o=void 0===n?"\u786e\u5b9a":n,c=e.onCancel,l=e.onOk,s=e.className;return _.a.createElement(r.a,{className:[I.a.root,s||""].join(" ")},_.a.createElement("span",{className:[I.a.btn,I.a.cancel].join(" "),onClick:c},a),_.a.createElement("span",{className:[I.a.btn,I.a.ok].join(" "),onClick:l},o))},M=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={value:e.props.defaultValue},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.onCancel,n=t.onSave,r=t.data,o=t.cols,c=t.type,l=this.state.value;return _.a.createElement(_.a.Fragment,null,_.a.createElement(H.a,{data:r,value:l,cols:o,onChange:function(t){e.setState({value:t})}}),_.a.createElement(L,{onCancel:function(){return a()},onOk:function(){return n(c,l)}}))}}]),a}(v.Component),V=a(386),R=a.n(V),A=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={selectedValues:e.props.defaultValue},e.onCancel=function(){e.setState({selectedValues:[]})},e.onOk=function(){var t=e.props,a=t.type;(0,t.onSave)(a,e.state.selectedValues)},e}return Object(p.a)(a,[{key:"onTagClick",value:function(e){var t=this.state.selectedValues,a=Object(u.a)(t);if(a.indexOf(e)<=-1)a.push(e);else{var n=a.findIndex((function(t){return t===e}));a.splice(n,1)}this.setState({selectedValues:a})}},{key:"renderFilters",value:function(e){var t=this,a=this.state.selectedValues;return e.map((function(e){var n=a.indexOf(e.value)>-1;return _.a.createElement("span",{key:e.value,className:[R.a.tag,n?R.a.tagActive:""].join(" "),onClick:function(){return t.onTagClick(e.value)}},e.label)}))}},{key:"render",value:function(){var e=this.props,t=e.data,a=t.roomType,n=t.oriented,r=t.floor,o=t.characteristic,c=e.onCancel,l=e.type;return _.a.createElement("div",{className:R.a.root},_.a.createElement("div",{className:R.a.mask,onClick:function(){return c(l)}}),_.a.createElement("div",{className:R.a.tags},_.a.createElement("dl",{className:R.a.dl},_.a.createElement("dt",{className:R.a.dt},"\u6237\u578b"),_.a.createElement("dd",{className:R.a.dd},this.renderFilters(a)),_.a.createElement("dt",{className:R.a.dt},"\u671d\u5411"),_.a.createElement("dd",{className:R.a.dd},this.renderFilters(n)),_.a.createElement("dt",{className:R.a.dt},"\u697c\u5c42"),_.a.createElement("dd",{className:R.a.dd},this.renderFilters(r)),_.a.createElement("dt",{className:R.a.dt},"\u623f\u5c4b\u4eae\u70b9"),_.a.createElement("dd",{className:R.a.dd},this.renderFilters(o)))),_.a.createElement(L,{className:R.a.footer,cancelText:"\u6e05\u9664",onCancel:this.onCancel,onOk:this.onOk}))}}]),a}(v.Component),D=a(387),B=a.n(D),J={area:!1,mode:!1,price:!1,more:!1},P={area:["area","null"],mode:["null"],price:["null"],more:[]},W=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={titleSelectedStatus:J,openType:"",filtersData:{},selectedValues:P},e.onTitleClick=function(t){e.htmlBody.className="body-fixed";var a=e.state,n=a.titleSelectedStatus,r=a.selectedValues,o=Object(d.a)({},n);Object.keys(n).forEach((function(e){if(e!==t){var a=r[e];"area"!==e||2===a.length&&"area"===a[0]?"mode"===e&&"null"!==a[0]||"price"===e&&"null"!==a[0]||"more"===e&&0!==a.length?o[e]=!0:o[e]=!1:o[e]=!0}else o[t]=!0})),e.setState({openType:t,titleSelectedStatus:o})},e.onCancel=function(t){e.htmlBody.className="",console.log("cancel:",t);var a=e.state,n=a.titleSelectedStatus,r=a.selectedValues,o=Object(d.a)({},n),c=r[t];"area"!==t||2===c.length&&"area"===c[0]?"mode"===t&&"null"!==c[0]||"price"===t&&"null"!==c[0]||"more"===t&&0!==c.length?o[t]=!0:o[t]=!1:o[t]=!0,e.setState({openType:"",titleSelectedStatus:o})},e.onSave=function(t,a){e.htmlBody.className="",console.log(t,a);var n=e.state.titleSelectedStatus,r=Object(d.a)({},n),o=a;"area"!==t||2===o.length&&"area"===o[0]?"mode"===t&&"null"!==o[0]||"price"===t&&"null"!==o[0]||"more"===t&&0!==o.length?r[t]=!0:r[t]=!1:r[t]=!0;var c=Object(d.a)({},e.state.selectedValues,Object(O.a)({},t,a));console.log("\u6700\u65b0\u7684\u9009\u4e2d\u503c\uff1a",c);var l=c.area,s=c.mode,i=c.price,u=c.more,m={},p=l[0];console.log(p);var h="null";3===l.length&&(h="null"!==l[2]?l[2]:l[1]),m[p]=h,m.mode=s[0],m.price=i[0],m.more=u.join(","),console.log(m),e.props.onFilter(m),e.setState({openType:"",titleSelectedStatus:r,selectedValues:c})},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.htmlBody=document.body,this.getFiltersData()}},{key:"getFiltersData",value:function(){var e=Object(i.a)(s.a.mark((function e(){var t,a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(localStorage.getItem("hkzf_city")),a=t.value,e.next=3,y.a.get("/houses/condition?id=".concat(a));case 3:n=e.sent,this.setState({filtersData:n.data.body});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"renderFilterPicker",value:function(){var e=this.state,t=e.openType,a=e.filtersData,n=a.area,r=a.subway,o=a.rentType,c=a.price,l=e.selectedValues;if("area"!==t&&"mode"!==t&&"price"!==t)return null;var s=[],i=3,u=l[t];switch(t){case"area":s=[n,r],i=3;break;case"mode":s=o,i=1;break;case"price":s=c,i=1}return _.a.createElement(M,{key:t,onCancel:this.onCancel,onSave:this.onSave,data:s,cols:i,type:t,defaultValue:u})}},{key:"renderFilterMore",value:function(){var e=this.state,t=e.openType,a=e.selectedValues,n=e.filtersData,r=n.roomType,o=n.oriented,c=n.floor,l=n.characteristic;if("more"!==t)return null;var s={roomType:r,oriented:o,floor:c,characteristic:l},i=a.more;return _.a.createElement(A,{data:s,type:t,onSave:this.onSave,onCancel:this.onCancel,defaultValue:i})}},{key:"renderMask",value:function(){var e=this,t=this.state.openType,a="more"===t||""===t;return _.a.createElement(S.Spring,{from:{opacity:0},to:{opacity:a?0:1}},(function(a){return 0===a.opacity?null:_.a.createElement("div",{style:a,className:B.a.mask,onClick:function(){return e.onCancel(t)}})}))}},{key:"render",value:function(){var e=this.state.titleSelectedStatus;return _.a.createElement("div",{className:B.a.root},this.renderMask(),_.a.createElement("div",{className:B.a.content},_.a.createElement(F,{titleSelectedStatus:e,onClick:this.onTitleClick}),this.renderFilterPicker(),this.renderFilterMore()))}}]),a}(v.Component),K=a(199),z=a(404),X=a.n(z),Y=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).placeholder=Object(v.createRef)(),e.content=Object(v.createRef)(),e.handleScroll=function(){var t=e.props.height,a=e.placeholder.current,n=e.content.current;a.getBoundingClientRect().top<0?(n.classList.add(X.a.fixed),a.style.height="".concat(t,"px")):(n.classList.remove(X.a.fixed),a.style.height="0px")},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){return _.a.createElement("div",null,_.a.createElement("div",{ref:this.placeholder}),_.a.createElement("div",{ref:this.content},this.props.children))}}]),a}(v.Component),Q=a(250),q=a(405),G=a.n(q),Z=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={list:[],count:0,isLoading:!1},e.label="",e.value="",e.filters={},e.onFilter=function(t){window.scrollTo(0,0),e.filters=t,e.searchHouseList()},e.renderHouseList=function(t){var a=t.key,n=t.index,r=t.style,o=e.state.list[n];return o?(console.log(o),_.a.createElement(K.a,{key:a,onClick:function(){return e.props.history.push("/detail/".concat(o.houseCode))},style:r,src:E.a+o.houseImg,title:o.title,desc:o.desc,tags:o.tags,price:o.price})):_.a.createElement("div",{key:a,style:r},_.a.createElement("p",{className:G.a.loading}))},e.isRowLoaded=function(t){var a=t.index;return!!e.state.list[a]},e.loadMoreRows=function(t){var a=t.startIndex,n=t.stopIndex;return console.log(a,n),new Promise((function(t){y.a.get("/houses",{params:Object(d.a)({cityId:e.value},e.filters,{start:a,end:n})}).then((function(a){e.setState({list:[].concat(Object(u.a)(e.state.list),Object(u.a)(a.data.body.list))}),t()}))}))},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=Object(i.a)(s.a.mark((function e(){var t,a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.d)();case 2:t=e.sent,a=t.label,n=t.value,this.label=a,this.value=n,this.searchHouseList();case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"searchHouseList",value:function(){var e=Object(i.a)(s.a.mark((function e(){var t,a,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),c.a.loading("\u52a0\u8f7d\u4e2d...",0,null,!1),e.next=4,y.a.get("/houses",{params:Object(d.a)({cityId:this.value},this.filters,{start:1,end:20})});case 4:t=e.sent,console.log(t),a=t.data.body,n=a.list,r=a.count,c.a.hide(),console.log(t),0!==r&&c.a.info("\u5171\u627e\u5230 ".concat(r," \u5957\u623f\u6e90"),2,null,!1),this.setState({list:n,count:r,isLoading:!1});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"renderList",value:function(){var e=this,t=this.state,a=t.count,n=t.isLoading;return 0!==a||n?_.a.createElement(g.b,{isRowLoaded:this.isRowLoaded,loadMoreRows:this.loadMoreRows,rowCount:a},(function(t){var n=t.onRowsRendered,r=t.registerChild;return _.a.createElement(g.d,null,(function(t){var o=t.height,c=t.isScrolling,l=t.scrollTop;return _.a.createElement(g.a,null,(function(t){var s=t.width;return _.a.createElement(g.c,{onRowsRendered:n,ref:r,autoHeight:!0,width:s,height:o,rowCount:a,rowHeight:120,rowRenderer:e.renderHouseList,isScrolling:c,scrollTop:l})}))}))})):_.a.createElement(Q.a,null,"\u6ca1\u6709\u627e\u5230\u623f\u6e90\uff0c\u8bf7\u60a8\u6362\u4e2a\u641c\u7d22\u6761\u4ef6\u5427~")}},{key:"render",value:function(){var e=this;this.state.count;return _.a.createElement("div",null,_.a.createElement(r.a,{className:G.a.header},_.a.createElement("i",{className:"iconfont icon-back",onClick:function(){return e.props.history.go(-1)}}),_.a.createElement(b,{cityName:this.label,className:G.a.searchHeader})),_.a.createElement(Y,{height:40},_.a.createElement(W,{onFilter:this.onFilter})),_.a.createElement("div",{className:G.a.houseItems},this.renderList()))}}]),a}(_.a.Component)}}]);
//# sourceMappingURL=13.127e3daf.chunk.js.map